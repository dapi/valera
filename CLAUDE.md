# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

**–ü–ï–†–í–û–ï –ß–¢–û –ù–£–ñ–ù–û –ü–†–û–ß–ò–¢–ê–¢–¨:** [Memory Bank](.claude/memory-bank.md)

–°–æ–¥–µ—Ä–∂–∏—Ç **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è** –∏ **–ø—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∞**:
- [Product Constitution](docs/product/constitution.md) - –ù–ï–ü–†–ò–ö–û–°–ù–û–í–ï–ù–ù–´–ï —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤)
- –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è AI-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- Team structure –∏ –∑–æ–Ω—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

**–í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ memory-bank.md –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –õ–Æ–ë–û–ô —Ä–∞–±–æ—Ç—ã!**

## üìã –ü—Ä–∞–≤–∏–ª–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (Zero –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)

### **üß† memory-bank.md = WHY** (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è)
- **–ü–û–ß–ï–ú–£** –ø—Ä–æ–µ–∫—Ç —É—Å—Ç—Ä–æ–µ–Ω –∏–º–µ–Ω–Ω–æ —Ç–∞–∫
- –ò—Å—Ç–æ—Ä–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã (Product Constitution)
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- Team structure –∏ –∑–æ–Ω—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

### **üìñ CLAUDE.md = HOW** (–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è)
- **–ö–ê–ö** —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–æ–µ–∫—Ç–æ–º
- –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ –∏ –∫–æ–º–∞–Ω–¥—ã
- –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

**üîó –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –ü–û–ß–ï–ú–£ ‚Üí memory-bank.md, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –ö–ê–ö ‚Üí CLAUDE.md

## üìã Quick Start (–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è)

1. **–ò–∑—É—á–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (WHY):** [.claude/memory-bank.md](.claude/memory-bank.md)
2. **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (HOW):** Ruby on Rails 8.1 + ruby_llm + PostgreSQL
3. **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (HOW):** `bin/dev`, `bin/rails test`, `bin/rubocop`
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (HOW):** [docs/README.md](docs/README.md)
5. **üöÄ –ù–æ–≤—ã–π flow —Ä–∞–±–æ—Ç—ã:** [FLOW.md](docs/FLOW.md) - **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û**

> **–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º —Å—Ç–µ–∫–µ –∏ –∫–æ–º–∞–Ω–¥–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** —Å–º. –Ω–∏–∂–µ –≤ —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ.

## üîÑ –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–£–ü–†–û–©–ï–ù–ù–´–ô)

**–ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø:** –û–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é (**Feature Implementation Plan**) –≤–º–µ—Å—Ç–æ —Ç—Ä–µ—Ö (User Story + Tech Spec + Tech Solution).

### üìã –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
```bash
# –í–º–µ—Å—Ç–æ: User Story ‚Üí Tech Spec ‚Üí Tech Solution ‚Üí Implementation
# –¢–µ–ø–µ—Ä—å: Feature Implementation Plan ‚Üí Implementation
1. –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω: docs/requirements/templates/user-story-hybrid-template.md
2. –°–æ–∑–¥–∞—Ç—å FIP-XXX-–Ω–∞–∑–≤–∞–Ω–∏–µ.md
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã
4. –°—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
```

### üéØ –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å FIP
- ‚úÖ –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±–æ—Ç–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–∏—Å–æ–º
- ‚úÖ –ö—Ä—É–ø–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- ‚ùå Small bug fix (< 2 —á–∞—Å–æ–≤)
- ‚ùå Documentation update

**üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [FLOW.md](docs/FLOW.md)

## Project Overview

Valera is an AI-powered chatbot for car service automation built with Ruby on Rails 8.1. The application uses the `ruby_llm` gem to provide conversational AI capabilities and is designed to interface with Telegram for customer interactions around car services.

## Core Technologies

- **Ruby on Rails 8.1** - Main application framework
- **PostgreSQL** - Primary database
- **ruby_llm gem (~> 1.8)** - AI/LLM integration
- **anyway_config (~> 2.7)** - Configuration management
- **Tailwind CSS** - Styling framework
- **Hotwire (Turbo + Stimulus)** - Frontend framework
- **Solid Suite** (Cache, Queue, Cable) - Background processing and caching
- **Slim** - Template engine
- **Minitest** - Testing framework

## Development Commands

### Essential Rails Commands
```bash
# Start development server
bin/dev

# Run Rails console
bin/rails console

# Run database migrations
bin/rails db:migrate

# Create new migration
bin/rails generate migration <migration_name>

# Run tests
bin/rails test
# OR
rake test
# OR
make test
```

### Code Quality and Security
```bash
# Run RuboCop for code style checking
bin/rubocop

# Run RuboCop with auto-correction
bin/rubocop -a

# Run security audit
bin/bundler-audit

# Run Brakeman security scanner
bin/brakeman

# Run all quality checks (CI script)
bin/ci
```

### Background Jobs and Services
```bash
# Start Solid Queue worker
bin/jobs

# Start Solid Cable server
bin/cable

# Check cache status
bin/rails cache:status
```

## Application Architecture

### Core Models
- **Chat** - Main conversation entity using `acts_as_chat` from ruby_llm
- **Message** - Individual messages with attachment support via `has_many_attached :attachments`
- **ToolCall** - LLM tool/function call tracking using `acts_as_tool_call`
- **Model** - AI model configuration and management

### Configuration Management
The application uses `anyway_config` for sophisticated configuration handling:

- Main configuration class: `ApplicationConfig` (config/configs/application_config.rb)
- Environment-based configuration with type coercion
- Required parameter validation
- Singleton pattern for global access via class methods

Key configuration sections:
- LLM provider and model settings
- File paths for prompts and data
- Telegram bot integration
- Rate limiting configuration
- Conversation management settings

### Security and Testing Practices
- **No File.write/File.delete** in tests - use safe testing patterns
- **No ENV modifications** in test environment
- **Logging in tests is not mocked or verified**
- Specifications are stored in `./specs/` directory
- Implementation plans are stored in `./protocols/` directory (strict rule)

### Development Workflow
- Russian language interface support (car service domain context)
- All implementation plans must be saved to `.protocols/` directory
- Specifications are saved to `./specs/` directory
- Use MCP context7 for studying Ruby gems
- Refer to `./docs/gems/` for comprehensive gem documentation and examples

## Database Schema

The application uses PostgreSQL with Rails 8.1's default schema management. Key schema files:
- `db/schema.rb` - Main database schema
- `db/cache_schema.rb` - Solid Cache schema
- `db/queue_schema.rb` - Solid Queue schema
- `db/cable_schema.rb` - Solid Cable schema

## Asset Management

- **Propshaft** - Modern Rails asset pipeline
- **Importmap** - JavaScript module management without build step
- **Tailwind CSS** - Utility-first CSS framework
- **Slim templates** - Lightweight template engine

## Deployment and Operations

- Docker-based deployment with multi-stage builds
- Puma web server with Thruster for HTTP acceleration
- Health check endpoint at `/up`
- Environment-based configuration loading

## Important Development Notes

- Do not read or use `.env*` files (per user instructions)
- Study `anyway_config` gem documentation before modifying ApplicationConfig
- The application is designed for Russian-speaking users in car service domain
- All conversation history and AI interactions are persisted through the Chat/Message models
- Tool calls are tracked separately for audit and debugging purposes- –ü—Ä–æ—á–∏—Ç–∞–π README.md

## Testing

Tests are located in `test/` directory and use Minitest framework. Run with `rake test` or `make test`.

## Important Notes

- –ü—Ä–µ–∂–¥–µ —á–µ–º –º–µ–Ω—è—Ç—å ApplicationCOnfig –∏–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –∏–∑–º–µ–Ω–∏—Ç—å –∏–∑—É—á–∏ gem anyway_config
- Do not read or use `.env*` files (per user instructions)
- Use MCP context7 for studying Ruby gems
- Service prices and implementation plans are referenced in CLAUDE.md for quick access
- **üöÄ –ù–û–í–´–ô –ü–û–î–•–û–î:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Feature Implementation Plans (FIP) –≤–º–µ—Å—Ç–æ —Ä–∞–∑–¥–µ–ª—å–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- FIP —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `docs/requirements/` —Å —Ñ–æ—Ä–º–∞—Ç–æ–º `FIP-XXX-–Ω–∞–∑–≤–∞–Ω–∏–µ.md`
- Small tasks (< 2 —á–∞—Å–æ–≤) —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è —Å—Ä–∞–∑—É –±–µ–∑ FIP
- The bot supports Russian language interface (car service context)
- –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è File.write –∏ File.delete –∏ –ø—Ä–æ—á–∏–µ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –≤ —Ç–µ—Å—Ç–∞—Ö
- –ù–ï –∏–∑–º–µ–Ω–µ—é—Ç—Å—è ENV-—ã –≤ —Ç–µ—Å—Ç–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö –Ω–µ –º–æ–∫–∞–µ—Ç—Å—è –∏ –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
- –ü–æ —Ç–æ–º—É –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å gems ruby_llm –∏ telegram-bot –∑–∞–≥–ª—è–¥—ã–≤–∞–π –≤ ./docs/gems/

## Critical Gems Documentation

AI –∞–≥–µ–Ω—Ç –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö gems –ø—Ä–æ–µ–∫—Ç–∞:

### ruby_llm Gem Documentation
**Location:** `./docs/gems/ruby_llm/`

**Available Resources:**
- `README.md` - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- `api-reference.md` - –ü–æ–ª–Ω—ã–π API reference
- `examples/` - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã:
  - `basic-chat.rb` - –ë–∞–∑–æ–≤—ã–π —á–∞—Ç –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
  - `tool-calls.rb` - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ function calling
  - `configuration.rb` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- `patterns.md` - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ best practices

**Key Features Covered:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (OpenAI, Anthropic, Gemini, DeepSeek, Mistral)
- –ê–∫—Ç–∏–≤–Ω–∞—è –∑–∞–ø–∏—Å—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (`acts_as_chat`, `acts_as_message`, `acts_as_tool_call`)
- Tool/Function calling
- Streaming responses
- Embeddings –∏ image generation
- –ú–æ–¥–µ–ª–∏ –∏ –∏—Ö –≤—ã–±–æ—Ä –ø–æ–¥ –∑–∞–¥–∞—á–∏
- Error handling –∏ retry –ª–æ–≥–∏–∫–∞
- Rails –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å anyway_config

### telegram-bot Gem Documentation
**Location:** `./docs/gems/telegram-bot/`

**Available Resources:**
- `README.md` - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ setup
- `api-reference.md` - –ü–æ–ª–Ω—ã–π API reference
- `examples/` - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã:
  - `advanced-handlers.rb` - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- `patterns.md` - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è Telegram –±–æ—Ç–æ–≤

**Key Features Covered:**
- Long polling –∏ webhook —Ä–µ–∂–∏–º—ã
- –í—Å–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π (—Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –ª–æ–∫–∞—Ü–∏—è)
- Reply –∏ inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- File handling –∏ –∑–∞–≥—Ä—É–∑–∫–∞
- Error handling –∏ rate limiting
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Rails
- Command patterns –∏ state management
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## AI Agent Instructions for Planning

–ü—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–¥–∞—á, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å telegram-bot –∏–ª–∏ ruby_llm:

1. **–í—Å–µ–≥–¥–∞ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ `./docs/gems/`**
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ `examples/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π**
3. **–ü—Ä–∏–º–µ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑ `patterns.md`**
4. **–í–∫–ª—é—á–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –≤ –ø–ª–∞–Ω—ã –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏**
5. **–°—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏ –ø–æ–¥—Ö–æ–¥—ã –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**
6. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å best practices –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏**

### Integration Planning Checklist

**–î–ª—è Telegram Bot –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- [ ] –í—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –∏–∑ `docs/gems/telegram-bot/patterns.md`
- [ ] –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä –∏–∑ `docs/gems/telegram-bot/examples/`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –∏–ª–∏ long polling —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–ª–∞–≤–∏–∞—Ç—É—Ä –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

**–î–ª—è Ruby LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- [ ] –í—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å –ø–æ–¥ –∑–∞–¥–∞—á—É —Å–æ–≥–ª–∞—Å–Ω–æ `docs/gems/ruby_llm/patterns.md`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–∑ `docs/gems/ruby_llm/examples/configuration.rb`
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ acts_as –º–∞–∫—Ä–æ—Å—ã
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å tool calls –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç AI –∞–≥–µ–Ω—Ç–∞ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π.

## ü§ñ Automatic Learning Protocol for Claude

### üéØ Mandatory Pre-Work Learning

**–ö–ª–æ–¥ –î–û–õ–ñ–ï–ù –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑—É—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –õ–Æ–ë–û–ô —Ä–∞–±–æ—Ç–æ–π —Å telegram-bot:**

1. **Auto-Detection:** Claude –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç telegram-related –∑–∞–¥–∞—á–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –∏ —Ñ–∞–π–ª–∞–º
2. **Forced Learning:** –ó–∞–ø—É—Å–∫–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—É—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º –∏–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
3. **Structured Study:** –ò–∑—É—á–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ —Å—Ç—Ä–æ–≥–æ–º –ø–æ—Ä—è–¥–∫–µ (README ‚Üí API ‚Üí Patterns ‚Üí Examples)
4. **Knowledge Validation:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º —Ä–∞–±–æ—Ç—ã
5. **Current Analysis:** –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ –ø—Ä–æ–µ–∫—Ç–µ

### üìö Learning Resources Location

- **üìñ Learning Protocol:** `.claude/telegram-bot-learning.md` - –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—É—á–µ–Ω–∏—è
- **‚úÖ Pre-Work Checklist:** `.claude/telegram-checklist.md` - –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π
- **üîÑ Context Processor:** `.claude/context-processor.rb` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### üöÄ Auto-Learning Triggers

Claude –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±—É—á–µ–Ω–∏–µ –ø—Ä–∏:

**–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ:**
- "telegram", "bot", "webhook", "chat", "message"
- "inline", "callback", "keyboard", "button"
- "tg_", "telegr", "bot_token"

**–£–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:**
- –§–∞–π–ª—ã —Å "telegram", "bot", "webhook", "chat"
- `app/models/chat*`, `app/models/message*`
- `config/initializers/*telegram*`

**–¢–∏–ø—ã –∑–∞–¥–∞—á:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ telegram —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –û—Ç–ª–∞–¥–∫–∞ telegram –ø—Ä–æ–±–ª–µ–º
- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è telegram –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤

### üìã Mandatory Study Sequence

1. **Core Documentation** (5 –º–∏–Ω) ‚Üí `docs/gems/telegram-bot/README.md`
2. **API Reference** (10 –º–∏–Ω) ‚Üí `docs/gems/telegram-bot/api-reference.md`
3. **Architecture Patterns** (10 –º–∏–Ω) ‚Üí `docs/gems/telegram-bot/patterns.md`
4. **Code Examples** (15 –º–∏–Ω) ‚Üí `docs/gems/telegram-bot/examples/`
5. **Current Implementation Analysis** ‚Üí –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
6. **Knowledge Validation** ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–Ω–∏–º–∞–Ω–∏—è
7. **Task-Specific Preparation** ‚Üí –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–µ

### ‚úÖ Success Criteria

Claude –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ –∫–æ–≥–¥–∞:
- ‚úÖ –ò–∑—É—á–µ–Ω–∞ –≤—Å—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –û—Ç–≤–µ—Ç–ª–µ–Ω—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –ü–æ–Ω—è—Ç—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- ‚úÖ –ù–∞–π–¥–µ–Ω—ã –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∏–º–µ—Ä—ã
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ Claude –æ–±–ª–∞–¥–∞–µ—Ç –ø–æ–ª–Ω–æ–π, –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø–µ—Ä–µ–¥ –≤–Ω–µ—Å–µ–Ω–∏–µ–º –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ telegram —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.**

## ü§ñ Automatic Learning Protocol for Ruby LLM

### üéØ Mandatory Pre-Work Learning

**Claude –î–û–õ–ñ–ï–ù –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑—É—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –õ–Æ–ë–û–ô —Ä–∞–±–æ—Ç–æ–π —Å ruby_llm:**

1. **Auto-Detection:** Claude –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç LLM-related –∑–∞–¥–∞—á–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –∏ —Ñ–∞–π–ª–∞–º
2. **Forced Learning:** –ó–∞–ø—É—Å–∫–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—É—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º –∏–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
3. **Structured Study:** –ò–∑—É—á–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ —Å—Ç—Ä–æ–≥–æ–º –ø–æ—Ä—è–¥–∫–µ (README ‚Üí API ‚Üí Patterns ‚Üí Examples)
4. **Knowledge Validation:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º —Ä–∞–±–æ—Ç—ã
5. **Current Analysis:** –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ –ø—Ä–æ–µ–∫—Ç–µ

### üìö Learning Resources Location

- **üìñ Learning Protocol:** `.claude/ruby_llm-learning.md` - –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—É—á–µ–Ω–∏—è ruby_llm
- **‚úÖ Pre-Work Checklist:** `.claude/ruby_llm-checklist.md` - –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π —Å LLM
- **üîÑ Context Processor:** `.claude/context-processor.rb` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### üöÄ Auto-Learning Triggers

Claude –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±—É—á–µ–Ω–∏–µ –ø—Ä–∏:

**–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ:**
- "ruby_llm", "llm", "ai", "assistant", "claude", "gpt"
- "tool", "function", "embedding", "generation", "model"
- "openai", "anthropic", "gemini", "acts_as_chat"
- "acts_as_message", "acts_as_tool_call"

**–£–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:**
- –§–∞–π–ª—ã —Å "ruby_llm", "llm", "ai", "chat", "message"
- `app/models/chat.rb`, `app/models/message.rb`, `app/models/tool_call.rb`
- `config/initializers/ruby_llm.rb`

**–¢–∏–ø—ã –∑–∞–¥–∞—á:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ LLM —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –û—Ç–ª–∞–¥–∫–∞ LLM –ø—Ä–æ–±–ª–µ–º
- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è LLM –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö chat —Ñ—É–Ω–∫—Ü–∏–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ tool calling
- –†–∞–±–æ—Ç–∞ —Å embeddings –∏–ª–∏ image generation

### üìã Mandatory Study Sequence

1. **Core Documentation** (5 –º–∏–Ω) ‚Üí `docs/gems/ruby_llm/README.md`
2. **API Reference** (10 –º–∏–Ω) ‚Üí `docs/gems/ruby_llm/api-reference.md`
3. **Architecture Patterns** (10 –º–∏–Ω) ‚Üí `docs/gems/ruby_llm/patterns.md`
4. **Code Examples** (15 –º–∏–Ω) ‚Üí `docs/gems/ruby_llm/examples/`
5. **Current Implementation Analysis** ‚Üí –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
6. **Knowledge Validation** ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–Ω–∏–º–∞–Ω–∏—è
7. **Task-Specific Preparation** ‚Üí –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–µ

### ‚úÖ Success Criteria

Claude –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ –∫–æ–≥–¥–∞:
- ‚úÖ –ò–∑—É—á–µ–Ω–∞ –≤—Å—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –û—Ç–≤–µ—Ç–ª–µ–Ω—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –ü–æ–Ω—è—Ç—ã acts_as –º–∞–∫—Ä–æ—Å—ã –∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ù–∞–π–¥–µ–Ω—ã –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∏–º–µ—Ä—ã
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ü–æ–Ω—è—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ –º–æ–¥–µ–ª–µ–π

**–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ Claude –æ–±–ª–∞–¥–∞–µ—Ç –ø–æ–ª–Ω–æ–π, –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø–µ—Ä–µ–¥ –≤–Ω–µ—Å–µ–Ω–∏–µ–º –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ LLM —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.**

## üìã Product Constitution - –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

### üö® Product Constitution (–ü–ï–†–í–û–ï –î–ï–õ–û –î–õ–Ø –ü–†–û–ß–¢–ï–ù–ò–Ø)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `./docs/product/constitution.md`

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** Product Constitution —Å–æ–¥–µ—Ä–∂–∏—Ç **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï** —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–¥—É–∫—Ç—É, –∫–æ—Ç–æ—Ä—ã–µ **–ù–ï –ú–û–ì–£–¢ –ë–´–¢–¨ –ù–ê–†–£–®–ï–ù–´** –ø—Ä–∏ –ª—é–±–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –í–°–ï–ì–î–ê –Ω–∞—á–∏–Ω–∞–π—Ç–µ —Ä–∞–±–æ—Ç—É —Å –∏–∑—É—á–µ–Ω–∏—è –∫–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–∏!

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
1. **Dialogue-Only Interaction** - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥ (–ù–ò–ö–ê–ö–ò–• –∫–Ω–æ–ø–æ–∫!)
2. **AI-First Approach** - AI –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
3. **Visual Analysis Priority** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ñ–æ—Ç–æ–∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è –∫—É–∑–æ–≤–Ω–æ–≥–æ —Ä–µ–º–æ–Ω—Ç–∞
4. **Russian Language Context** - —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
5. **System-First Logic Approach** - –ª–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ system prompts, –∞ –Ω–µ –∫–æ–¥
6. **No File Operations in Tests** - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤

**–ü–†–û–í–ï–†–Ø–ô–¢–ï –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï –ö–û–ù–°–¢–ò–¢–£–¶–ò–ò –ü–ï–†–ï–î –õ–Æ–ë–û–ô –†–ê–ó–†–ê–ë–û–¢–ö–û–ô!**

## üìã –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏

### üìÇ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `./docs/requirements/`

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞:

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:**
- **User Stories** (`user-stories/`) - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "As a... I want..."
- **Technical Specifications** (`specifications/`) - –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **Feature Descriptions** (`features/`) - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –∏ User Journey
- **API Specifications** (`api/`) - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ API –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- **Backlog** (`backlog/`) - –ë—ç–∫–ª–æ–≥ –∑–∞–¥–∞—á –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

**üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤ [ROADMAP.md](../ROADMAP.md) - –í–°–ï–ì–î–ê —Å–æ–±–ª—é–¥–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∞–∑ –∏ –Ω–µ –Ω–∞—á–∏–Ω–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Ñ–∞–∑—É –±–µ–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–π!

### üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏

**–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:**
1. **User Story** ‚Üí –æ–ø–∏—Å–∞–Ω–∏–µ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **Feature Description** ‚Üí –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
3. **Technical Specification** ‚Üí —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
4. Specification _

**–®–∞–±–ª–æ–Ω—ã –∏ –ø—Ä–∏–º–µ—Ä—ã:**
- –®–∞–±–ª–æ–Ω—ã –≤ `docs/requirements/templates/`
- –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è telegram –±–æ—Ç–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –∏ —Å–≤—è–∑–µ–π

### üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏

Claude –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –ø—Ä–∏:

**–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:**
- "user story", "—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è", "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ", "feature"
- "–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è", "docs", "requirements", "backlog"
- "—Ñ—É–Ω–∫—Ü–∏—è", "functionality", "–æ–ø–∏—Å–∞–Ω–∏–µ"

**–£–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:**
- –§–∞–π–ª—ã –≤ `docs/requirements/`
- `US-XXX`, `TS-XXX`, `feature-` —Ñ–∞–π–ª—ã
- `docs/requirements/templates/`

### üìã –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω –∏–∑ `templates/`
   - –ü—Ä–∏—Å–≤–æ–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä (US-001, TS-001)
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

2. **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
   - –ò–∑—É—á–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—É—é User Story
   - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Technical Specification
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   - –°–æ–∑–¥–∞—Ç—å implementation plan –≤ `.protocols/`

3. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞:**
   - Draft ‚Üí Review ‚Üí Approved ‚Üí In Progress ‚Üí Done
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏

Claude –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ –∫–æ–≥–¥–∞:
- ‚úÖ –ò–∑—É—á–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- ‚úÖ –ü–æ–Ω—è—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ù–∞–π–¥–µ–Ω—ã –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∏ implementation –ø–ª–∞–Ω–∞–º–∏
- ‚úÖ –ü–æ–Ω—è—Ç workflow —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ò–∑—É—á–µ–Ω [ROADMAP.md](../ROADMAP.md) –∏ –ø–æ–Ω—è—Ç–Ω—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ñ–∞–∑ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ Claude —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ —Å–∏—Å—Ç–µ–º–Ω–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.**
- –ù–µ –º–µ–Ω—è–µ—Ç –∫–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—é –ø—Ä–æ–¥—É–∫—Ç–∞ –±–µ–∑ —è–≤–Ω–æ–≥–æ –Ω–∞ —Ç–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è
- –ù–µ —Ö–∞—Ä–¥–∫–æ–¥–∏–º —Ç–µ–∫—Å—Ç –∏ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Ç–µ–∫—Å—Ç–∞—Ö –∏ rspec. –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –∏–ª–∏ –µ–≥–æ —á–∞—Å—Ç—å—é —Å—Å—ã–ª–∞—è—Å—å –Ω–∞ —Ç–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ i18n.t –∏–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É –∏–ª–∏ —á—Ä–µ–∑–µ –∫–æ–Ω—Ñ–∏–≥ –∏ —Ç–ø)
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–æ–¥–µ–ª–µ–π –º—ã –Ω–µ —Å–æ–∑–¥–∞–µ–º –∏–º –æ—Ç–¥–µ–ª—å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é –∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏—Ö —á–µ—Ä–µ–∑ rails generate model
- –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ –∏–∑–º–µ–Ω–∏–∏ rspec –∏–∑—É—á–∞–π telegram-bot/lib/telegram/bot/rspec/*
- –í –¥–æ–∫—É–º–µ–Ω—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ ./docs –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- –ü–ª–∞–Ω—ã –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∞–≥–µ–Ω—Ç—É –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ç–∞–º –∫–∞–∫ –ø–æ–ø–∞—Å—Ç—å –≤ TODO —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ .protocols/
- –í —Ç–µ—Å—Ç–∞—Ö –º–æ–¥–µ–ª–µ–π –º—ã –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é, scope, –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –∏ –¥—Ä—É–≥–∏–µ –±–∞–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω—ã–µ –≤ —Å–∞–º–æ–π –º–æ–¥–µ–ª–∏
- –ù–ï —Å–æ–∑–¥–∞—é—Ç—Å—è rspec –¥–ª—è –º–æ–¥–µ–ª–µ–π, —Ç–∞–∫ –∫–∞–∫ –º–æ–¥–µ–ª–∏ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å —á–µ—Ä–µ–∑ minitest
- –í —Ç–µ—Å—Ç–∞—Ö/rspec –≤–º–µ—Å—Ç–æ Model.create –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–∏–∫—Å—Ç—É—Ä—ã
- –ö–æ–≥–¥–∞ —á–∏–Ω–∏–º rspec –º—ã –ù–ï –º–µ–Ω—è–µ–º spec/rails_helper.rb —Ç–∞–∫ –∫–∞–∫ —Å—á–∏—Ç–∞–µ–º —á—Ç–æ –æ–Ω
  –≤–µ—Ä–Ω—ã–π.
